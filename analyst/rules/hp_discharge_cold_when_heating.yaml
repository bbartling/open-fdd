# Heat pump not heating: fan on + zone cold (heating mode) but discharge still cold
# Zone temp < 69Â°F = heating mode; discharge should be warm when heating
name: hp_discharge_cold_when_heating
description: Discharge air below minimum when fan on and zone is cold (heating mode)
type: expression
flag: hp_discharge_cold_flag
equipment_type: [Heat_Pump]

inputs:
  Supply_Air_Temperature_Sensor:
    brick: Supply_Air_Temperature_Sensor
    column: sat
  Zone_Temperature_Sensor:
    brick: Zone_Temperature_Sensor
    column: zt
  Supply_Fan_Status:
    brick: Supply_Fan_Status
    column: fan_status

params:
  min_discharge_temp: 85
  zone_cold_threshold: 69.0   # zone < 69 = heating mode
  fan_on_threshold: 0.01

expression: |
  (Supply_Fan_Status > fan_on_threshold) & (Zone_Temperature_Sensor < zone_cold_threshold) & (Supply_Air_Temperature_Sensor < min_discharge_temp)
