# AHU Fault Condition 9 â€” OAT too high in free cooling mode
# BRICK: oat->Outside_Air_Temperature_Sensor, sat_setpoint->Supply_Air_Temperature_Setpoint,
#        economizer_sig->Damper_Position_Command (OA), cooling_sig->Valve_Command (Clg)
name: oat_too_high_free_cooling
description: Outside air temp too high in free cooling without mechanical cooling
type: expression
flag: fc9_flag
equipment_type: [AHU, VAV_AHU]

inputs:
  oat:
    brick: Outside_Air_Temperature_Sensor
    column: oat
  sat_setpoint:
    brick: Supply_Air_Temperature_Setpoint
    column: sat_setpoint
  economizer_sig:
    brick: Damper_Position_Command
    column: economizer_sig
  cooling_sig:
    brick: Valve_Command
    column: cooling_sig

params:
  outdoor_err_thres: 1.0
  delta_t_supply_fan: 0.5
  supply_err_thres: 1.0
  ahu_min_oa_dpr: 0.1

expression: |
  (oat - outdoor_err_thres > sat_setpoint - delta_t_supply_fan + supply_err_thres) & (economizer_sig > ahu_min_oa_dpr) & (cooling_sig < 0.1)
